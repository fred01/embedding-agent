# Embedding Agent - Web Dashboard

Embedding Agent —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≥–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5000 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

### –§—É–Ω–∫—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞:

- ‚úÖ **–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è SSE** - –∂–∏–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ facade
- üìä **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤** - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚è±Ô∏è **Uptime** - –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞
- ‚ö° **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
- üì° **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏** - –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- üîÑ **–ü–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–æ–≤
- üÜî **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≥–µ–Ω—Ç–µ** - ID, –º–æ–¥–µ–ª—å, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üìÖ **–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** - –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∞–Ω–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞—è –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

## –ó–∞–ø—É—Å–∫

```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –ø–æ—Ä—Ç—É 5000)
export FACADE_TOKEN="your-token"
./start_sse.sh

# –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:5000
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export WEB_PORT=8080
./start_sse.sh
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Flask** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º daemon-–ø–æ—Ç–æ–∫–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∞–≥–µ–Ω—Ç–∞ (thread-safe —Å –ø–æ–º–æ—â—å—é locks)
- API endpoint `/api/stats` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `fetch()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã

## API

### GET /
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–∞—à–±–æ—Ä–¥–∞

### GET /api/stats
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:

```json
{
  "agent_id": "agent-abc123",
  "uptime_seconds": 3600,
  "connected": true,
  "tasks_processed": 150,
  "last_message_time": "2024-12-18T14:30:00",
  "connection_attempts": 1,
  "avg_compute_time": 2.5,
  "avg_publish_time": 0.3,
  "model_name": "BAAI/bge-m3",
  "embedding_dimension": 1024,
  "facade_url": "https://nsq.fred.org.ru",
  "task_stream": "embedding_tasks",
  "task_group": "embedding-agent"
}
```

## –î–∏–∑–∞–π–Ω

- üé® –ö—Ä–∞—Å–∏–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è grid-—Å–∏—Å—Ç–µ–º–∞
- üåà –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞
- ‚ú® –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
- üíö –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–π –∑–µ–ª—ë–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- ‚ù§Ô∏è –ö—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í–µ–±-—Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reverse proxy (nginx)
2. –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Flask (Python)
- **Frontend**: Vanilla JavaScript, CSS3
- **Threading**: Python threading –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: threading.Lock –¥–ª—è thread-safe —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
